<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  </head>
  <body>

    <header>
        <div id="header-img">
            <img src="static/images/IIITD_logo.jpeg" height="70px">
        </div>
        <h3>COURSE RETRIEVAL SYSTEM</h3>
    </header>

    <form action="/fetch-course-recommendations" method="post" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="formFile" class="form-label">Upload Transcript</label>
            <input class="form-control" type="file" id="formFile" name="file" required>
            <div id="fileHelp" class="form-text">Only PDF files (.pdf)</div>
        </div>
        <label class="form-label">Select Interest Departments (Optional)</label>
          <br>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="CSE" name="checkboxCSE">
            <label class="form-check-label" for="inlineCheckbox1">CSE</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="ECE" name="checkboxECE">
            <label class="form-check-label" for="inlineCheckbox2">ECE</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="MTH" name="checkboxMTH">
            <label class="form-check-label" for="inlineCheckbox3">MTH</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox4" value="BIO" name="checkboxBIO">
            <label class="form-check-label" for="inlineCheckbox4">BIO</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox5" value="DES" name="checkboxDES">
            <label class="form-check-label" for="inlineCheckbox5">DES</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox6" value="SSH" name="checkboxSSH">
            <label class="form-check-label" for="inlineCheckbox6">SSH</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" id="inlineCheckbox7" value="OTHERS" name="checkboxOTHERS">
            <label class="form-check-label" for="inlineCheckbox7">OTHERS</label>
          </div>
          
        <br><br>
        <div class="text-center">
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>

    <!-- Alerts -->
      {% if request.status == "success" %}
      <div class="alert alert-success alert-box">
        <strong>Success!</strong> We have some course suggestions for you!
      </div>
      {% endif %}
      {% if request.status == "fail" %}
      <div class="alert alert-danger alert-box">
          <strong>Oops!</strong> We couldn't process your uploaded file. Please try again!
      </div>
      {% endif %}
      <!-- Results Section -->
      {% if request.status == "success" %}
      <hr>
      <!-- Transcript Data -->
      <h4 class="text-center">
        I. TRANSCRIPT DATA
      </h4>

      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Semester</th>
            <th scope="col">Course Code</th>
            <th scope="col">Course Title</th>
            <th scope="col">Credit</th>
            <th scope="col">Grade</th>
          </tr>
        </thead>
        <tbody>
          {% for i in range(request.data['transcript_data']['Semester']|length) %}
          <tr>
            <td>{{ request.data['transcript_data']['Semester'][i] }}</td>
            <td>{{ request.data['transcript_data']['Code'][i] }}</td>
            <td>{{ request.data['transcript_data']['Title of the Course'][i] }}</td>
            <td>{{ request.data['transcript_data']['Credit'][i] }}</td>
            <td>{{ request.data['transcript_data']['Grade'][i] }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <br><br>

      <!-- Graduation Requirement Tracker -->
      <h4 class="text-center">
        II. GRADUATION REQUIREMENT TRACKER
      </h4>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Credits</th>
            <th scope="col">Required Credits</th>
            <th scope="col">Completed Credits</th>
            <th scope="col">Remaining Credits</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for i in range(request.data['graduation_req_tracker']['Status']|length) %}
          <tr>
            <td>{{ request.data.graduation_req_tracker['Credits'][i] }}</td>
            <td>{{ request.data.graduation_req_tracker['Required Credits'][i] }}</td>
            <td>{{ request.data.graduation_req_tracker['Completed Credits'][i] }}</td>
            <td>{{ request.data.graduation_req_tracker['Remaining Credits'][i] }}</td>

            {% if request.data.graduation_req_tracker.Status[i] %}
              <td class="table-success">Complete</td>
            {% else %}
              <td class="table-danger">Incomplete</td>
            {% endif %}

          </tr>
          {% endfor %}
        </tbody>
      </table>


      {% endif %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
  </body>
</html>